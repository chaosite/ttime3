!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=self,s=n(1);r.onmessage=function(e){try{let t=s.generateSchedules(e.data.courses,e.data.filterSettings);r.postMessage(t)}catch(e){console.error("Caught exception in worker:",e),r.postMessage(null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=!1;const s=n(2),o=n(4);function a(e){return e.location?e.location.split(" ")[0]:e.location}function u(e){let t=e.slice(),n=0;s.sortEvents(t);for(let e=0;e<t.length-1;e++)if(t[e].day==t[e+1].day&&t[e+1].startMinute==t[e].endMinute){let r=a(t[e]),s=a(t[e+1]);r&&s&&r!=s&&n++}return n}function i(e){return!s.eventsCollide(e.events)}function l(...e){if(0==e.length)return[[]];let t=l(...e.slice(1));return e[0].map(e=>t.map(t=>[e].concat(t))).reduce((e,t)=>e.concat(t))}function c(e,t,n){let s=e.filter(t);return r&&console.info(`Filter ${n} removed ${e.length-s.length} schedules`),s}function f(e){let t=[!1,!1,!1,!1,!1];return e.forEach(function(e){t[e.day]=!0}),t.filter(e=>0==e).length}function d(e){return new Map([[o.RatingType.earliestStart,Math.min(...e.map(e=>e.startMinute/60))],[o.RatingType.latestFinish,Math.max(...e.map(e=>e.endMinute/60))],[o.RatingType.numRuns,u(e)],[o.RatingType.freeDays,f(e)]])}function p(e){let t=e.reduce((e,t)=>e.concat(t.events),[]);return{events:t,rating:d(t)}}t.cartesian=l,t.generateSchedules=function(e,t){r&&console.time("generateSchedules");let n=l(...Array.from(e).map(e=>(function(e,t){return null==e.groups?(console.warn("Scheduling with groupless course",e),e):(e.groups=e.groups.filter(n=>!t.forbiddenGroups.includes(`${e.id}.${n.id}`)),e)})(e,t)).map(s.groupsByType).reduce((e,t)=>e.concat(t),[])).map(p);return r&&console.info(`${n.length} total schedules`),n=function(e,t){let n=e.slice();return t.noCollisions&&(n=c(n,i,"noCollisions")),n=function(e,t){for(let n of Array.from(o.AllRatings.keys())){let r=1/0,s=-1/0;t.ratingMin.has(n)&&(s=t.ratingMin.get(n)),t.ratingMax.has(n)&&(r=t.ratingMax.get(n)),e=c(e,function(e){if(!e.rating.has(n))return!0;let t=e.rating.get(n);return t>=s&&t<=r},`Rating '${n}'`)}return e}(n,t)}(n,t),r&&console.timeEnd("generateSchedules"),n},t.rate=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);t.Faculty=class{};t.Group=class{};t.Course=class{};t.AcademicEvent=class{};t.Schedule=class{};t.FilterSettings=class{};function s(e){e.sort(function(e,t){return e.day!=t.day?e.day-t.day:e.startMinute-t.startMinute})}function o(e){e.forEach(function(e){e.courses.forEach(function(t){t.faculty=e,t.groups&&t.groups.forEach(function(e){e.course=t,e.events&&e.events.forEach(function(t){t.group=e})})})})}t.DateObj=class{},t.sortEvents=s,t.eventsCollide=function(e){let t=e.slice();s(t);for(let e=0;e<t.length-1;e++)if(t[e].day==t[e+1].day&&t[e+1].startMinute<t[e].endMinute)return!0;return!1},t.loadCatalog=function(e){return new Promise(function(t,n){let s=new XMLHttpRequest;s.open("GET",e),s.onload=function(){if(200==s.status){let e=null;try{o(e="["==s.response[0]?JSON.parse(s.response):r.parseCheeseFork(s.response)),t(e)}catch(e){n(e)}}else n(Error(s.statusText))},s.onerror=function(){n(Error("Network Error"))},s.send()})},t.fixRawCatalog=o,t.groupsByType=function(e){let t=new Map;return e.groups?(e.groups.forEach(function(e){t.has(e.type)||t.set(e.type,[]),t.get(e.type).push(e)}),Array.from(t.values())):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=/([0-9]{1,2})\.([0-9]{1,2})\.([0-9]{4})/;function s(e){if(!e)return null;let t=r.exec(e);return null==t?(console.warn("Failed to match date regex with: ",e),null):{day:Number(t[1]),month:Number(t[2]),year:Number(t[3])}}t.parseCheeseFork=function(e){const t={academicPoints:"נקודות",building:"בניין",courseId:"מספר מקצוע",courseName:"שם מקצוע",day:"יום",dayLetters:"אבגדהוש",faculty:"פקולטה",group:"קבוצה",hour:"שעה",lecturer_tutor:"מרצה/מתרגל",moed_a:"מועד א",moed_b:"מועד ב",num:"מס.",room:"חדר",sport:"ספורט",thoseInCharge:"אחראים",type:"סוג"},n=new Map([["הרצאה","lecture"],["תרגול","tutorial"]]);let r=new Map;if(!e.startsWith("var courses_from_rishum = "))throw new Error("Not valid cheesefork jsData - lacks expected prefix");let o=JSON.parse(e.substring("var courses_from_rishum = ".length));return console.info("Experimental CheeseFork parser. First course: ",o[0]),o.forEach(function(e){let o=e.general[t.faculty];r.has(o)||r.set(o,{name:o,semester:"cheesefork-unknown-semester",courses:[]});let a=r.get(o),u={academicPoints:Number(e.general[t.academicPoints]),faculty:a,name:e.general[t.courseName],id:Number(e.general[t.courseId]),lecturerInCharge:e.general[t.thoseInCharge],testDates:[e.general[t.moed_a],e.general[t.moed_b]].map(s).filter(e=>null!=e),groups:[]},i=new Map,l=new Map;e.schedule.forEach(function(e){let r=e[t.group],s=e[t.num];if(i.has(s)||i.set(s,r),i.get(s)!=r)return;if(!l.has(s)){let r="",a="";o==t.sport?(r="sport",a=e[t.type]):r=n.get(e[t.type])||e[t.type],l.set(s,{id:s,description:a,course:u,teachers:[],type:r,events:[]})}let a=l.get(s),c=e[t.hour].split(" - ").map(function(e){let t=e.split(":"),n=60*Number(t[0]);return t.length>1&&(n+=10*Number(t[1])),n}),f={group:a,day:t.dayLetters.indexOf(e[t.day]),startMinute:c[0],endMinute:c[1],location:e[t.building]+" "+e[t.room]};{let n=e[t.lecturer_tutor];n&&!a.teachers.includes(n)&&a.teachers.push(n)}a.events.push(f)}),l.forEach(function(e,t){u.groups.push(e)}),a.courses.push(u)}),Array.from(r.values())}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.earliestStart=0]="earliestStart",e[e.latestFinish=1]="latestFinish",e[e.numRuns=2]="numRuns",e[e.freeDays=3]="freeDays"}(r=t.RatingType||(t.RatingType={}));t.AllRatings=new Map([[r.earliestStart,{name:"Earliest start",explanation:"Hour at which the earliest class of the week start",badgeTextFunc:e=>`Earliest start: ${e}`}],[r.latestFinish,{name:"Latest finish",explanation:"Hour at which the latest class of the week finishes",badgeTextFunc:e=>`Latest finish: ${e}`}],[r.numRuns,{name:"Number of runs",explanation:"Number of adjacent classes in different buildings",badgeTextFunc:e=>`${e} runs`}],[r.freeDays,{name:"Free days",explanation:"Number of days with no classes",badgeTextFunc:e=>`${e} free days`}]])}]);